<!--
$PostgreSQL: pgsql/doc/src/sgml/ref/alter_sequence.sgml,v 1.9 2004/11/27 21:27:07 petere Exp $
PostgreSQL documentation
-->

<refentry id="SQL-ALTERSEQUENCE">
 <refmeta>
  <refentrytitle id="SQL-ALTERSEQUENCE-TITLE">ALTER SEQUENCE</refentrytitle>
  <refmiscinfo>SQL - Comandos da Linguagem</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>
   ALTER SEQUENCE
  </refname>
  <refpurpose>
   altera a definição de um gerador de seqüência
  </refpurpose>
 </refnamediv> 

 <indexterm zone="sql-altersequence">
  <primary>ALTER SEQUENCE</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
ALTER SEQUENCE <replaceable class="parameter">nome</replaceable> [ INCREMENT [ BY ] <replaceable class="parameter">incremento</replaceable> ]
    [ MINVALUE <replaceable class="parameter">valor_mínimo</replaceable> | NO MINVALUE ] [ MAXVALUE <replaceable class="parameter">valor_máximo</replaceable> | NO MAXVALUE ]
    [ RESTART [ WITH ] <replaceable class="parameter">início</replaceable> ] [ CACHE <replaceable class="parameter">cache</replaceable> ] [ [ NO ] CYCLE ]
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Descrição</title>

  <para>
   O comando <command>ALTER SEQUENCE</command> altera os parâmetros de um
   gerador de seqüência existente. Todos os parâmetros que não são
   explicitamente definidos no comando <command>ALTER SEQUENCE</command>
   mantêm suas definições anteriores.
  </para>
 </refsect1>

 <refsect1>
  <title>Parâmetros</title>

   <para>
    <variablelist>
     <varlistentry>
      <term><replaceable class="parameter">nome</replaceable></term>
      <listitem>
       <para>
        O nome (opcionalmente qualificado pelo esquema) da seqüência a ser
        alterada.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">incremento</replaceable></term>
      <listitem>
       <para>
	A cláusula <literal>INCREMENT BY
	<replaceable class="parameter">incremento</replaceable></literal>
	é opcional. Um valor positivo produz uma seqüência ascendente,
	enquanto um valor negativo produz uma seqüência descendente.
	Se não for especificado, o valor anterior do incremento será mantido.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">valor_mínimo</replaceable></term>
      <term><literal>NO MINVALUE</literal></term>
      <listitem>
       <para>
	A cláusula opcional <literal>MINVALUE
	<replaceable class="parameter">valor_mínimo</replaceable></literal>
	especifica o valor mínimo para a seqüência. Se for especificado
	<literal>NO MINVALUE</literal>, serão utilizados os valores padrão
	1 e -2<superscript>63</superscript>-1 para seqüências ascendentes e
        descendentes, respectivamente. Se nenhuma das duas opções for
        especificada, o valor mínimo corrente será mantido.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">valor_máximo</replaceable></term>
      <term><literal>NO MAXVALUE</literal></term>
      <listitem>
       <para>
	A cláusula opcional <literal>MAXVALUE
	<replaceable class="parameter">valor_máximo</replaceable></literal>
	especifica o valor máximo para a seqüência. Se for especificado 
	<literal>NO MAXVALUE</literal>, serão utilizados os valores padrão
	2<superscript>63</superscript>-1 e -1, para seqüências ascendentes e
        descendentes, respectivamente. Se nenhuma das duas opções for
        especificada, o valor máximo corrente será mantido.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">início</replaceable></term>
      <listitem>
       <para>
	A cláusula opcional <literal>RESTART WITH
	<replaceable class="parameter">início</replaceable></literal>
	muda o valor corrente da seqüência.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">cache</replaceable></term>
      <listitem>
       <para>
	A cláusula <literal>CACHE 
        <replaceable class="parameter">cache</replaceable></literal>
	permite que números da seqüência sejam pré-alocados
	e armazenados em memória para obter um acesso mais rápido. O valor
        mínimo é 1 (somente um valor pode ser gerado de cada vez, ou seja, sem
        <literal>cache</literal>). Se não for especificado, o valor anterior de
        <literal>cache</literal> será mantido.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>CYCLE</term>
      <listitem>
       <para>
	A palavra chave opcional <literal>CYCLE</literal> pode ser utilizada
        para permitir uma seqüência ascendente ou descendente reiniciar quando
        atingir o <replaceable class="parameter">valor_máximo</replaceable> ou
	o <replaceable class="parameter">valor_mínimo</replaceable>,
	respectivamente.
	Se o limite for atingido, o próximo número gerado será o
	<replaceable class="parameter">valor_mínimo</replaceable> ou o
	<replaceable class="parameter">valor_máximo</replaceable>,
	respectivamente.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>NO CYCLE</term>
      <listitem>
       <para>
	 Se a palavra chave opcional <literal>NO CYCLE</literal> for
         especificada, todas as chamadas a <function>nextval</function> após a
         seqüência ter atingido seu valor máximo retornam um erro. Se nem
	 <literal>CYCLE</literal> nem <literal>NO CYCLE</literal> for
         especificado, o comportamento anterior para o ciclo será mantido.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </para>
  </refsect1>

 <refsect1>
  <title>Exemplos</title>

  <para>
   Reiniciar uma seqüência chamada <literal>serial</literal>, em 105:
<programlisting>
ALTER SEQUENCE serial RESTART WITH 105;
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Observações</title>

  <para>
   Para evitar o bloqueio de transações concorrentes que obtêm números a partir
   de uma mesma seqüência, o comando <command>ALTER SEQUENCE</command> nunca é
   desfeito (<literal>rollback</literal>); as mudanças entram em vigor
   imediatamente, não sendo reversíveis.
  </para>

  <para>
   O comando <command>ALTER SEQUENCE</command> não afeta imediatamente
   os resultados de <literal>nextval</literal> nos processos servidor
   que pré-alocaram (<literal>cached</literal>) valores da seqüência, a não ser
   no processo servidor corrente. Os demais processos servidor utilizarão todos
   os valores pré-alocados antes de observar a mudança dos parâmetros da
   seqüência. O processo servidor corrente é afetado imediatamente.
  </para>
 </refsect1>


 <refsect1>
  <title>Compatibilidade</title>

  <para>
   O comando <command>ALTER SEQUENCE</command> está em conformidade com o
   <acronym>SQL:2003</acronym>.
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
