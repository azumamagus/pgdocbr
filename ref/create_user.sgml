<!--
$PostgreSQL: pgsql/doc/src/sgml/ref/create_user.sgml,v 1.36 2005/01/06 00:11:14 tgl Exp $
PostgreSQL documentation
-->

<refentry id="SQL-CREATEUSER">
 <refmeta>
  <refentrytitle id="sql-createuser-title">CREATE USER</refentrytitle>
  <refmiscinfo>SQL - Comandos da Linguagem</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>CREATE USER</refname>
  <refpurpose>cria uma conta de usuário do banco de dados</refpurpose>
 </refnamediv>

 <indexterm zone="sql-createuser">
  <primary>CREATE USER</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
CREATE USER <replaceable class="parameter">nome</replaceable> [ [ WITH ] <replaceable class="parameter">opção</replaceable> [ ... ] ]

onde <replaceable class="parameter">opção</replaceable> pode ser:

      SYSID <replaceable class="parameter">id_do_usuário</replaceable>
    | CREATEDB | NOCREATEDB
    | CREATEUSER | NOCREATEUSER
    | IN GROUP <replaceable class="parameter">nome_do_grupo</replaceable> [, ...]
    | [ ENCRYPTED | UNENCRYPTED ] PASSWORD '<replaceable class="parameter">senha</replaceable>'
    | VALID UNTIL '<replaceable class="parameter">data_e_hora</replaceable>'
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Descrição</title>

  <para>
   O comando <command>CREATE USER</command> adiciona um novo usuário
   ao agrupamento de bancos de dados do <productname>PostgreSQL</productname>.
   Consulte o <xref linkend="user-manag"> e o <xref
   linkend="client-authentication"> para obter informações adicionais sobre o
   gerenciamento de usuários e autenticação.
   Apenas os superusuários do banco de dados podem usar este comando.
  </para>
 </refsect1>

 <refsect1>
  <title>Parâmetros</title>

    <variablelist>
     <varlistentry>
      <term><replaceable class="parameter">nome</replaceable></term>
      <listitem>
       <para>
        O nome do usuário.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">id_do_usuário</replaceable></term>
      <listitem>
       <para>
        A cláusula <literal>SYSID</literal> pode ser utilizada para escolher o
        identificador de usuário do <productname>PostgreSQL</productname> do
        novo usuário. Normalmente não é necessário, mas pode ser útil se for
        necessário recriar o dono de um objeto que
        ficou órfão.
       </para>
       <para>
        Se não for especificado, será utilizado por padrão o maior identificador
        de usuário atribuído acrescido de um (com mínimo de 100).
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>CREATEDB</literal></term>
      <term><literal>NOCREATEDB</literal></term>
      <listitem>
       <para>
        Estas cláusulas definem a permissão para o usuário criar banco de dados.
        Se <literal>CREATEDB</literal> for especificado, o usuário sendo
        definido terá permissão para criar seus próprios bancos de dados.
        Se <literal>NOCREATEDB</literal> for especificado, nega-se ao usuário a
        permissão para criar banco de dados. Se esta cláusula for omitida,
        <literal>NOCREATEDB</literal> será utilizado por padrão.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>CREATEUSER</literal></term>
      <term><literal>NOCREATEUSER</literal></term>
      <listitem>
       <para>
        Estas cláusulas determinam se o usuário pode ou não criar novos
        usuários. <literal>CREATEUSER</literal> também torna o usuário um
        superusuário, o qual pode substituir todas as restrições de acesso.
        Se não for especificada, <literal>NOCREATEUSER</literal>
        é o padrão.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">nome_do_grupo</replaceable></term>
      <listitem>
       <para>
        O nome de um grupo existente onde o usuário será incluído como um novo
        membro. Podem ser especificados nomes de vários grupos.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">senha</replaceable></term>
      <listitem>
       <para>
        Define a senha do usuário. Se não se pretende utilizar
        autenticação por senha esta opção pode ser omitida, mas o
        usuário não poderá mais	se conectar se for decidido mudar
        para autenticação por senha. A senha poderá
        ser definida ou mudada posteriormente através do comando
        <xref linkend="SQL-ALTERUSER" endterm="SQL-ALTERUSER-title">.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>ENCRYPTED</literal></term>
      <term><literal>UNENCRYPTED</literal></term>
      <listitem>
       <para>
        Estas palavras chave controlam se a senha é armazenada criptografada,
        ou não, nos catálogos do sistema; se nenhuma das duas for especificada,
        o comportamento padrão é determinado pelo parâmetro de configuração
        <xref linkend="guc-password-encryption">.
        Se a cadeia de caracteres da senha já estiver criptografada no formato
        MD5, então a cadeia de caracteres é armazenada como está,
        independentemente de <literal>ENCRYPTED</literal> ou
        <literal>UNENCRYPTED</literal> ser especificado (porque o sistema não
        pode descriptografar a cadeia de caracteres criptografada contendo a
        senha). Esta funcionalidade permite a restauração de senhas
        criptografadas efetuadas por uma operação de
		cópia de segurança/recuperação
        (<literal>dump</literal>/<literal>restore</literal>).
       </para>

       <para>
        Deve ser observado que clientes antigos podem não possuir suporte para
        o mecanismo de autenticação MD5, necessário para
        trabalhar com senhas armazenadas criptografadas.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">data_e_hora</replaceable></term>
      <listitem>
       <para>
        A cláusula <literal>VALID UNTIL</literal> define uma data
        e hora após a qual a senha do usuário não é mais válida.
        Se esta cláusula for omitida, a conta será válida para sempre.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
 </refsect1>

 <refsect1>
  <title>Observações</title>

  <para>
   Deve ser usado o comando
   <xref linkend="SQL-ALTERUSER" endterm="SQL-ALTERUSER-title"> para
   mudar os atributos de um usuário, e <xref linkend="SQL-DROPUSER"
   endterm="SQL-DROPUSER-title"> para remover um usuário.  Deve se usado <xref
   linkend="SQL-ALTERGROUP" endterm="SQL-ALTERGROUP-title"> para adicionar ou
   remover usuários de grupos.
  </para>

  <para>
   O <productname>PostgreSQL</productname> inclui o programa <xref
   linkend="APP-CREATEUSER" endterm="APP-CREATEUSER-title"> que possui a
   mesma funcionalidade do <command>CREATE USER</command> (na verdade,
   chama este comando), mas pode ser executado a partir da linha de comando.
  </para>

  <para>
   A cláusula <literal>VALID UNTIL</literal> define uma data de expiração para a senha
   apenas, e não para a conta do usuário <foreignphrase>per se</foreignphrase>. Em
   particular, a obediência à data de expiração não é imposta ao se
   conectar utilizando um método de autenticação não baseado em senha.
  </para>
 </refsect1>

 <refsect1>
  <title>Exemplos</title>

  <para>
   Criar um usuário sem senha:
<programlisting>
CREATE USER jonas;
</programlisting>
  </para>

  <para>
   Criar um usuário com senha:
<programlisting>
CREATE USER davi WITH PASSWORD 'jw8s0F4';
</programlisting>
  </para>

  <para>
   Criar um usuário com uma senha válida até o fim de 2004.
   Após o primeiro segundo de 2005 a senha não será mais
   válida.

<programlisting>
CREATE USER miriam WITH PASSWORD 'jw8s0F4' VALID UNTIL '2005-01-01';
</programlisting>
  </para>

  <para>
   Criar uma conta onde o usuário pode criar bancos de dados:
<programlisting>
CREATE USER manuel WITH PASSWORD 'jw8s0F4' CREATEDB;
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilidade</title>

  <para>
   O comando <command>CREATE USER</command> é uma extensão do
   <productname>PostgreSQL</productname>. O padrão SQL
   deixa a definição de usuários para a implementação.
  </para>
 </refsect1>

 <refsect1>
  <title>Consulte também</title>

  <simplelist type="inline">
   <member><xref linkend="sql-alteruser" endterm="sql-alteruser-title"></member>
   <member><xref linkend="sql-dropuser" endterm="sql-dropuser-title"></member>
   <member><xref linkend="app-createuser"></member>
  </simplelist>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
