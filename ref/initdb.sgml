<!--
$PostgreSQL: pgsql/doc/src/sgml/ref/initdb.sgml,v 1.33.4.1 2005/02/22 02:56:37 momjian Exp $
PostgreSQL documentation
-->

<refentry id="APP-INITDB">
 <refmeta>
  <refentrytitle id="APP-INITDB-TITLE">initdb</refentrytitle>
  <manvolnum>1</manvolnum>
  <refmiscinfo>Aplicação</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>initdb</refname>
  <refpurpose>cria um agrupamento de bancos de dados do <productname>PostgreSQL</productname></refpurpose>
 </refnamediv>

 <indexterm zone="app-initdb">
  <primary>initdb</primary>
 </indexterm>

 <refsynopsisdiv>
  <cmdsynopsis>
   <command>initdb</command>
   <arg rep="repeat"><replaceable>opção</replaceable></arg>
   <group choice="plain">
    <arg>--pgdata </arg>
    <arg>-D </arg>
    <replaceable>diretório</replaceable>
   </group>
  </cmdsynopsis>
 </refsynopsisdiv>

 <refsect1 id="R1-APP-INITDB-1">
  <title>
   Descrição
  </title>
  <para>
   O utilitário <command>initdb</command> cria um agrupamento
   de bancos de dados do <productname>PostgreSQL</productname>.
   Um agrupamento de bancos de dados é uma coleção de bancos de dados
   gerenciados por uma única instância do servidor.
  </para>

  <para>
   Criar um agrupamento de banco de dados consiste em criar os diretórios onde
   os bancos de dados vão residir, gerar as tabelas do catálogo compartilhadas
   (tabelas que pertencem ao agrupamento como um todo, e não a um determinado
   banco de dados), e criar o banco de dados <literal>template1</literal>.
   Quando, mais tarde, for criado um banco de dado, tudo que existe no banco
   de dados <literal>template1</literal> será copiado.
   Este banco de dados contém tabelas do catálogo contendo coisas como os
   tipos de dado nativos.
  </para>

  <para>
   Embora o <command>initdb</command> tente criar o diretório de dados
   especificado, provavelmente não terá permissão para fazê-lo, porque
   geralmente o diretório de dados está sob um diretório que pertence ao
   <literal>root</literal>.
   Para resolver uma situação como esta deve-se: criar um diretório de dados
   vazio como <literal>root</literal>; usar o comando <command>chown</command>
   para tornar o usuário do banco de dados o dono deste diretório; executar
   <command>su</command> para se tornar o usuário do banco de dados; finalmente,
   executar o <command>initdb</command> como o usuário do banco de dados.
  </para>

  <para>
   O <command>initdb</command> deve ser executado pelo mesmo usuário que vai
   executar processo servidor, porque o servidor necessita ter acesso aos
   arquivos e diretórios criados pelo <command>initdb</command>.
   Como o servidor não deve ser executado pelo <literal>root</literal>, o
   <command>initdb</command> também não deve ser executado pelo
   <literal>root</literal> (Na verdade, não permite fazê-lo).
  </para>

  <para>
   O <command>initdb</command> inicializa o idioma e a codificação do conjunto
   de caracteres padrão do agrupamento de banco de dados.
   A ordem de classificação (<literal>LC_COLLATE</literal>), e as classes de conjunto
   de caracteres (<literal>LC_CTYPE</literal>, por exemplo, maiúscula, minúscula e
   dígito), são estabelecidas para toda a existência do agrupamento não podendo
   ser modificadas.
   Existe, também, impacto no desempenho quando é escolhida uma ordem de
   classificação diferente de <literal>C</literal> e de <literal>POSIX</literal>.
   Por estas razões, é importante fazer a escolha correta ao executar
   o <command>initdb</command>.
   Outras categorias de idioma podem ser mudadas posteriormente ao
   iniciar o servidor.
   Todos os valores de idioma do servidor (<literal>lc_*</literal>) podem ser
   vistos através do comando <command>SHOW ALL</command>.
   Podem ser encontrados mais detalhes na <xref linkend="locale">.
  </para>

  <para>
   A codificação do conjunto de caracteres de cada banco de dados pode
   ser definida individualmente, no momento da criação do banco de dados.
   O <command>initdb</command> determina a codificação do banco de dados
   <literal>template1</literal>, que serve de padrão para todos os outros
   bancos de dados.
   Para alterar a codificação padrão deve ser usada a opção
   <option>--encoding</option>.
   Podem ser encontrados mais detalhes na <xref linkend="multibyte">.
  </para>

 </refsect1>

 <refsect1>
  <title>Opções</title>

   <para>
    <variablelist>
     <varlistentry>
      <term><option>-A <replaceable class="parameter">método_de_autenticação</replaceable></option></term>
      <term><option>--auth=<replaceable class="parameter">método_de_autenticação</replaceable></option></term>
      <listitem>
       <para>
        Esta opção especifica o método de autenticação para os usuários locais
        usado no arquivo de configuração <filename>pg_hba.conf</filename>.
        Não use <literal>trust</literal> a menos que confie em todos os usuários
        locais do sistema.
        <literal>Trust</literal> é o padrão para facilitar a instalação.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-D <replaceable class="parameter">diretório</replaceable></option></term>
      <term><option>--pgdata=<replaceable class="parameter">diretório</replaceable></option></term>
      <listitem>
       <para>
        Esta opção especifica o diretório onde o agrupamento de banco de dados
        será armazenado. Esta é a única informação requerida pelo
        <command>initdb</command>, mas pode-se evitar escrevê-la
        definindo a variável de ambiente <envar>PGDATA</envar>,
        o que é conveniente porque, depois, o servidor de banco de dados
        (<command>postmaster</command>) poderá encontrar o diretório do
        bancos de dados usando esta mesma variável.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-E <replaceable class="parameter">codificação</replaceable></option></term>
      <term><option>--encoding=<replaceable class="parameter">codificação</replaceable></option></term>
      <listitem>
       <para>
        Seleciona a codificação do banco de dados modelo. Também será a
        codificação padrão para todos os bancos de dados criados posteriormente,
        a não ser quando for especificada uma outra.
        O padrão é derivado do idioma, ou <literal>SQL_ASCII</literal>
        se este não funcionar.
        Os conjuntos de caracteres suportados pelo servidor
        <productname>PostgreSQL</productname> estão descritos na
        <xref linkend="multibyte-charset-supported">.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--locale=<replaceable>idioma</replaceable></option></term>
      <listitem>
       <para>
        Define o idioma padrão para o agrupamento de banco de dados.
        Se esta opção não for especificada, o idioma é herdado do
        ambiente onde o <command>initdb</command> está executando.
        O suporte a idioma está descrito na <xref linkend="locale">.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--lc-collate=<replaceable>idioma</replaceable></option></term>
      <term><option>--lc-ctype=<replaceable>idioma</replaceable></option></term>
      <term><option>--lc-messages=<replaceable>idioma</replaceable></option></term>
      <term><option>--lc-monetary=<replaceable>idioma</replaceable></option></term>
      <term><option>--lc-numeric=<replaceable>idioma</replaceable></option></term>
      <term><option>--lc-time=<replaceable>idioma</replaceable></option></term>

      <listitem>
       <para>
        Como <option>--locale</option>, mas somente define o idioma para
        a categoria especificada.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-U <replaceable class="parameter">nome_do_usuário</replaceable></option></term>
      <term><option>--username=<replaceable class="parameter">nome_do_usuário</replaceable></option></term>
      <listitem>
       <para>
        Especifica o nome de usuário do superusuário do banco de dados.
        Por padrão o nome do usuário executando o <command>initdb</command>.
        Não importa realmente qual seja o nome do superusuário, mas é preferível
        manter o nome habitual <systemitem>postgres</systemitem>, mesmo que o
        nome do usuário do sistema operacional seja diferente.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-W</option></term>
      <term><option>--pwprompt</option></term>
      <listitem>
       <para>
        Faz o <command>initdb</command> solicitar a senha a ser atribuída ao
        superusuário do banco de dados. Se não se pretende utilizar autenticação
        por senha, isto não tem importância. Senão, não será possível
        utilizar autenticação por senha enquanto não for atribuída uma senha.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--pwfile=<replaceable>nome_do_arquivo</replaceable></option></term>
      <listitem>
       <para>
        Faz o <command>initdb</command> ler a senha do superusuário do banco de
        dados em um arquivo.
        A primeira linha do arquivo é lida como sendo a senha.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </para>

   <para>
    Também estão disponíveis outros parâmetros, menos utilizados:

    <variablelist>
     <varlistentry>
      <term><option>-d</option></term>
      <term><option>--debug</option></term>
      <listitem>
       <para>
        Mostra a saída de depuração do servidor de <literal>bootstrap</literal>,
        e algumas outras mensagens de menor interesse para o público em geral.
        O servidor de <literal>bootstrap</literal> é o programa que o
        <command>initdb</command> utiliza para criar as tabelas do catálogo.
        Esta opção gera uma quantidade imensa de saída extremamente entediante.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-L <replaceable class="parameter">diretório</replaceable></option></term>
      <listitem>
       <para>
        Especifica onde o <command>initdb</command> deve encontrar os seus
        arquivos de entrada para inicializar o agrupamento de banco de dados.
        Será dito se é necessário especificar o idioma explicitamente.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-n</option></term>
      <term><option>--noclean</option></term>
      <listitem>
       <para>
        Por padrão, quando o <command>initdb</command> determina que um erro
        impediu a criação completa do agrupamento de bancos de dados, são
        removidos todos os arquivos criados antes de ser descoberto que não era
        possível terminar o trabalho. Esta opção impede a remoção e, portanto,
        é útil para a depuração.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </para>

 </refsect1>

 <refsect1>
  <title>Ambiente</title>

  <variablelist>
   <varlistentry>
    <term><envar>PGDATA</envar></term>

    <listitem>
     <para>
      Especifica o diretório onde o agrupamento de bancos de dados deve ser
      armazenado; pode ser mudado usando a opção <option>-D</option>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>

 <refsect1>
  <title>Consulte também</title>

  <simplelist type="inline">
   <member><xref linkend="app-postgres"></member>
   <member><xref linkend="app-postmaster"></member>
  </simplelist>
 </refsect1>

</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
